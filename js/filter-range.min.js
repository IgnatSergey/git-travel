const scaleElement=document.querySelector(".scale"),barElement=document.querySelector(".bar"),thumbMin=document.querySelector(".toggle-min"),thumbMax=document.querySelector(".toggle-max"),inputStart=document.querySelector(".price-lable-min"),inputEnd=document.querySelector(".price-lable-max"),minValue=Number(inputStart.min),maxValue=Number(inputStart.max),form=document.querySelector(".side-filter__form"),getCoords=e=>{let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset,leftX:t.left,rigth:t.left+window.pageXOffset+t.width,bottom:t.top+window.pageYOffset+t.height,width:t.width}};form.addEventListener("keydown",(e=>{13==e.keyCode&&e.preventDefault(),console.log(22)}));const getInitialValues=()=>{const e=getCoords(thumbMin),t=getCoords(thumbMax),n=getCoords(scaleElement);let u=(inputStart.value-minValue)/(maxValue-minValue)*(n.width-2*e.width);thumbMin.style.left=u+"px",barElement.style.left=u+"px";let l=(inputEnd.value-minValue)/(maxValue-minValue)*(n.width-2*t.width)+e.width;thumbMax.style.left=l+"px",barElement.style.width=l-u+"px"},onClickInputStart=()=>{var e=getCoords(thumbMin),t=getCoords(thumbMax);const n=getCoords(scaleElement),u=t.leftX-e.width-n.leftX;let l=inputEnd.value;inputStart.max=l;let a=(inputStart.value-minValue)/(maxValue-minValue)*(n.width-2*e.width);a<0?(a=0,inputStart.value=minValue):a>u&&(a=u,inputStart.value=inputEnd.value),thumbMin.style.left=a+"px",barElement.style.left=a+"px",barElement.style.width=t.left-a-n.leftX+"px"},onClickInputEnd=()=>{var e=getCoords(thumbMin),t=getCoords(thumbMax);const n=getCoords(scaleElement);var u=n.rigth-n.leftX-t.width,l=e.rigth-n.leftX;let a=(inputEnd.value-minValue)/(maxValue-minValue)*(n.width-2*t.width)+e.width;a<l?(a=l,inputEnd.value=inputStart.value):a>u&&(a=u,inputEnd.value=maxValue),thumbMax.style.left=a+"px",barElement.style.width=a-e.left+n.leftX+"px"},moveRangeThumb=(e,t)=>{var n=getCoords(thumbMin),u=getCoords(thumbMax);const l=getCoords(scaleElement);function a(a){if(void 0===a.touches)var i=a.clientX,o=t.pageX;else i=a.targetTouches[0].clientX,o=t.targetTouches[0].clientX;if(e===thumbMin)var d=i-l.leftX-(o-n.left),m=u.leftX-u.width-l.leftX,r=0;else d=i-l.leftX-(o-u.left),m=l.rigth-l.leftX-u.width,r=n.rigth-l.leftX;d<r?d=r:d>m&&(d=m),e.style.left=d+"px",e===thumbMin?(barElement.style.left=d+"px",barElement.style.width=u.left-d-l.leftX+"px",inputStart.value=100*(d/(l.width-2*n.width)*(maxValue-minValue)/100).toFixed()+minValue):(barElement.style.width=d-n.left+l.leftX+"px",inputEnd.value=100*((d-n.width)/(l.width-2*n.width)*(maxValue-minValue)/100).toFixed()+minValue)}function i(){document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",a),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",a)}document.addEventListener("mousemove",a),document.addEventListener("mouseup",i),document.addEventListener("touchmove",a),document.addEventListener("touchend",i),e.ondragstart=function(){return!1}},changeRange=()=>{thumbMin.addEventListener("mousedown",(e=>{moveRangeThumb(thumbMin,e)})),thumbMin.addEventListener("touchstart",(e=>{moveRangeThumb(thumbMin,e)})),thumbMax.addEventListener("mousedown",(e=>{moveRangeThumb(thumbMax,e)})),thumbMax.addEventListener("touchstart",(e=>{moveRangeThumb(thumbMax,e)})),inputEnd.addEventListener("change",onClickInputEnd),inputEnd.addEventListener("keydown",(e=>{13==e.keyCode&&onClickInputEnd()})),inputStart.addEventListener("change",onClickInputStart),inputStart.addEventListener("keydown",(e=>{13==e.keyCode&&onClickInputStart()}))};export{changeRange,getInitialValues};